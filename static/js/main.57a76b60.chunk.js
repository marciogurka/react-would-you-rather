(this["webpackJsonpreact-would-you-rather"]=this["webpackJsonpreact-would-you-rather"]||[]).push([[0],{26:function(e,t,a){e.exports=a(45)},31:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(15),o=a.n(r),c=(a(31),a(8)),i=a(10),l=a(2),u=a(3),m=a.n(u),d=a(7);function h(e){return{type:"SET_AUTHED_USER",id:e}}var p=a(4),b=a(1),v={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://api.adorable.io/avatars/70/sarahedo.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://api.adorable.io/avatars/70/tylermcginnis.png",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://api.adorable.io/avatars/70/johndoe.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},E={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function f(e){return new Promise((function(t,a){var n=e.author,s=function(e){var t=e.optionOneText,a=e.optionTwoText,n=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:a}}}(e);setTimeout((function(){E=Object(b.a)({},E,Object(p.a)({},s.id,s)),v=Object(b.a)({},v,Object(p.a)({},n,Object(b.a)({},v[n],{questions:v[n].questions.concat([s.id])}))),t(s)}),1e3)}))}var O=Object(l.connect)((function(e){var t=e.users;return{loading:0===Object.keys(t).length,users:t}}),{setAuthedUser:h,handleGetUsers:function(){return function(e){return e(Object(u.showLoading)()),new Promise((function(e,t){setTimeout((function(){return e(Object(b.a)({},v))}),1e3)})).then((function(t){e(function(e){return{type:"RECEIVE_USERS",users:e}}(t)),e(Object(u.hideLoading)())}))}}})((function(e){var t=e.loading,a=e.users,r=e.handleGetUsers,o=e.setAuthedUser,c=Object(n.useState)(void 0),i=Object(d.a)(c,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){r()}),[r]),s.a.createElement(s.a.Fragment,null,s.a.createElement(u.LoadingBar,null),!t&&s.a.createElement("div",{className:"container login-page"},s.a.createElement("div",{className:"column box is-half is-offset-one-quarter"},s.a.createElement("h3",{className:"is-size-3 has-text-grey-light has-text-centered"},"Would you rather?"),s.a.createElement("form",{className:"hero is-primary",onSubmit:function(e){e.preventDefault(),o(l)}},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("span",{className:"select is-large"},s.a.createElement("select",{name:"user",onChange:function(e){var t=e.target.value;m(t)},value:l},s.a.createElement("option",{value:""},"Select an user"),Object.keys(a).map((function(e){return s.a.createElement("option",{key:e,value:e},a[e].name)})))),s.a.createElement("span",{className:"icon is-large is-left"},s.a.createElement("i",{className:"fas fa-user"})))),s.a.createElement("button",{className:"button is-dark is-medium",disabled:!l,type:"submit"},"Login")))))}));var N=Object(l.connect)((function(e){var t=e.authedUser;return{user:e.users[t]}}),{setAuthedUser:h})((function(e){var t=e.user,a=e.setAuthedUser;return s.a.createElement("nav",{className:"navbar",role:"navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{href:"#navbar",role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar"},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{id:"navbar",className:"navbar-menu"},s.a.createElement("div",{className:"navbar-start"},s.a.createElement(c.c,{className:"navbar-item",activeClassName:"active",exact:!0,to:"/"},s.a.createElement("span",null,"Home")),s.a.createElement(c.c,{className:"navbar-item",activeClassName:"active",to:"/add"},s.a.createElement("span",null,"New Question")),s.a.createElement(c.c,{className:"navbar-item",activeClassName:"active",to:"/leaderboard"},s.a.createElement("span",null,"Leaderboard")))),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("figure",{className:"image is-48x48"},s.a.createElement("img",{className:"is-rounded",src:t.avatarURL,alt:"User profile"})),s.a.createElement("div",{className:"navbar-item"},s.a.createElement("span",{className:"user-name"},t.name)),s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{onClick:function(){a(null)},className:"button is-light"},"LogOut")))))}));var g=Object(l.connect)((function(e){var t=e.authedUser,a=e.users,n=e.questions,s=Object.values(n).sort((function(e,t){return t.timestamp-e.timestamp}));return{users:a,answered:s.filter((function(e){return Object.keys(a[t].answers).includes(e.id)})),unanswered:s.filter((function(e){return!Object.keys(a[t].answers).includes(e.id)}))}}))((function(e){var t=e.users,a={answered:e.answered,unanswered:e.unanswered},r=Object(n.useState)("unanswered"),o=Object(d.a)(r,2),i=o[0],l=o[1];return s.a.createElement("div",{className:"tabs container is-centered"},s.a.createElement("ul",{className:"tabs-menu"},s.a.createElement("li",{className:"".concat("unanswered"===i&&"is-active"),onClick:function(){return l("unanswered")}},s.a.createElement("a",{href:"#unanswered"},"Unanswered Questions")),s.a.createElement("li",{className:"".concat("answered"===i&&"is-active"),onClick:function(){return l("answered")}},s.a.createElement("a",{href:"#answered"},"Answered Questions"))),s.a.createElement("div",{className:"questions"},a[i]&&a[i].map((function(e){return s.a.createElement("div",{key:e.id,className:"column is-two-fifths-mobile is-one-third-tablet"},s.a.createElement("div",{className:"box"},s.a.createElement("div",{className:"author"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{className:"is-rounded",src:t[e.author].avatarURL,alt:t[e.author].name})),s.a.createElement("span",{className:"is-size-6"},t[e.author].name)),s.a.createElement("div",{className:"box-content"},s.a.createElement("span",{className:"has-text-centered is-size-5"},"Would you rather?"),s.a.createElement("ul",{className:"options"},s.a.createElement("li",null,e.optionOne.text),s.a.createElement("li",{className:"is-italic has-text-weight-bold"},"OR"),s.a.createElement("li",null,e.optionTwo.text)),s.a.createElement(c.b,{to:"/questions/".concat(e.id),className:"button is-link"},"View Poll"))))}))))}));var w=function(){return s.a.createElement("div",{className:"hero is-warning is-large"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("h1",{className:"title"},"Oops, the page does not exists."),s.a.createElement("h2",{className:"subtitle"},"Error 404"))))},x=function(e){var t=e.question,a=e.author,r=e.authedUser,o=t.optionOne.votes,c=t.optionTwo.votes,i=Object(n.useState)(!1),l=Object(d.a)(i,2),u=l[0],m=l[1],h={optionOne:o.length,optionTwo:c.length,total:o.length+c.length};Object(n.useEffect)((function(){!function(e,t,a){e&&e.includes(a)?m("optionOne"):t&&t.includes(a)?m("optionTwo"):m(!1)}(o,c,r)}),[o,c,r]);var p=function(e,t){return e/t*100};return s.a.createElement("div",{className:"question-board-result container"},s.a.createElement("div",{className:"box column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"author"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{className:"is-rounded",src:a.avatarURL,alt:a.name})),s.a.createElement("span",{className:"is-size-6"},a.name)),s.a.createElement("div",{className:"box-content"},s.a.createElement("p",{className:"has-text-centered is-size-3"},"Results"),s.a.createElement("ul",{className:"options has-text-centered"},s.a.createElement("li",{className:"optionOne"===u?"answer":""},s.a.createElement("p",null,"Would you rather ",t.optionOne.text,"?","optionOne"===u&&s.a.createElement("span",{className:"tag is-link"},"You choose this!")),s.a.createElement("progress",{className:"progress is-primary",value:p(h.optionOne,h.total),max:"100"},p(h.optionOne,h.total).toFixed(2)," %"),s.a.createElement("p",null,h.optionOne," ouf of ",h.total," votes")),s.a.createElement("li",{className:"optionTwo"===u?"answer":""},s.a.createElement("p",null,"Would you rather ",t.optionTwo.text,"?","optionTwo"===u&&s.a.createElement("span",{className:"tag is-link"},"You choose this!")),s.a.createElement("progress",{className:"progress is-primary",value:p(h.optionTwo,h.total),max:"100"},p(h.optionTwo,h.total).toFixed(2)," %"),s.a.createElement("p",null,h.optionTwo," ouf of ",h.total," votes"))))))},j=function(e){var t=e.question,a=e.author,r=e.handleAddAnswer,o=Object(n.useState)(null),c=Object(d.a)(o,2),i=c[0],l=c[1],u=function(e){l(e)};return s.a.createElement("div",{className:"question-board container"},s.a.createElement("div",{className:"box column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"author"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{className:"is-rounded",src:a.avatarURL,alt:a.name})),s.a.createElement("span",{className:"is-size-6"},a.name)),s.a.createElement("form",{className:"box-content",onSubmit:function(e){e.preventDefault(),console.log(t);var a=t.id;r(a,i)}},s.a.createElement("p",{className:"has-text-centered is-size-3"},"Would you rather?"),s.a.createElement("div",{className:"options has-text-centered"},s.a.createElement("label",{className:"checkbox"},s.a.createElement("input",{id:"optionOne",type:"radio",name:"answer",value:"optionOne",onInput:function(){return u("optionOne")}}),s.a.createElement("span",{className:"checkmark"}),t.optionOne.text),s.a.createElement("p",{className:"is-italic has-text-weight-bold has-text-centered "},"OR"),s.a.createElement("label",{className:"checkbox"},s.a.createElement("input",{id:"optionTwo",type:"radio",name:"answer",value:"optionTwo",onInput:function(){return u("optionTwo")}}),s.a.createElement("span",{className:"checkmark"}),t.optionTwo.text)),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-link",disabled:!i,type:"submit"},"Confirm")))))};var y=Object(i.f)(Object(l.connect)((function(e,t){return{users:e.users,authedUser:e.authedUser,question:e.questions[t.match.params.id]}}),{handleAddAnswer:function(e,t){return function(a,n){var s=n().authedUser;a(Object(u.showLoading)()),function(e){var t=e.authedUser,a=e.qid,n=e.answer;return new Promise((function(e,s){setTimeout((function(){v=Object(b.a)({},v,Object(p.a)({},t,Object(b.a)({},v[t],{answers:Object(b.a)({},v[t].answers,Object(p.a)({},a,n))}))),E=Object(b.a)({},E,Object(p.a)({},a,Object(b.a)({},E[a],Object(p.a)({},n,Object(b.a)({},E[a][n],{votes:E[a][n].votes.concat([t])}))))),e()}),500)}))}({authedUser:s,qid:e,answer:t}).then((function(){return a(function(e){var t=e.authedUser;return{type:"ADD_ANSWER",qid:e.qid,answer:e.answer,authedUser:t}}({authedUser:s,qid:e,answer:t}))})).then((function(){return a(Object(u.hideLoading)())}))}}})((function(e){var t=e.question,a=e.users,n=e.authedUser,r=e.handleAddAnswer;if(!t)return s.a.createElement(w,null);var o=a[t.author];return Object.keys(a[n].answers).includes(t.id)?s.a.createElement(x,{question:t,authedUser:n,author:o}):s.a.createElement(j,{question:t,author:o,handleAddAnswer:r})}))),T=Object(l.connect)(null,{handleAddQuestion:function(e){var t=e.optionOneText,a=e.optionTwoText;return function(e,n){var s=n().authedUser;e(Object(u.showLoading)()),f({optionOneText:t,optionTwoText:a,author:s}).then((function(t){return e(function(e){return{type:"ADD_QUESTION",question:e}}(t))})).then((function(){return e(Object(u.hideLoading)())}))}}})((function(e){var t=e.history,a=e.handleAddQuestion,r=Object(n.useState)(""),o=Object(d.a)(r,2),c=o[0],i=o[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),m=u[0],h=u[1],p=function(e){var t=e.target,a=t.name,n=t.value;"optionOneText"===a?i(n):"optionTwoText"===a&&h(n)};return s.a.createElement("div",{className:"new-question-page container"},s.a.createElement("h2",{className:"is-size-2 has-text-weight-bold has-text-centered"},"New Question"),s.a.createElement("div",{className:"column is-half is-offset-one-quarter"},s.a.createElement("form",{className:"new-question-form box",onSubmit:function(e){e.preventDefault(),a({optionOneText:c,optionTwoText:m}),t.push("/")}},s.a.createElement("p",{className:"has-text-centered"},"Fill the gaps:"),s.a.createElement("h3",{className:"is-size-3 has-text-grey-light has-text-centered"},"Would you rather..."),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-medium",type:"text",placeholder:"Option One Text",name:"optionOneText",value:c,onChange:p}))),s.a.createElement("p",{className:"has-text-centered"},"OR"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input is-medium",type:"text",placeholder:"Option Two Text",name:"optionTwoText",value:m,onChange:p}))),s.a.createElement("div",{className:"has-text-centered"},s.a.createElement("button",{className:"button is-link",disabled:!c||!m,type:"submit"},"Submit")))))})),q=function(e){return Object.values(e).map((function(e){return Object(b.a)({},e,{counts:{answers:Object.keys(e.answers).length,questions:e.questions.length,points:Object.keys(e.answers).length+e.questions.length}})}))};var U=Object(l.connect)((function(e){var t=e.users;return{authedUser:e.authedUser,users:q(t).sort((function(e,t){return t.counts.points-e.counts.points}))}}))((function(e){var t=e.users,a=e.authedUser;return s.a.createElement("div",{className:"leaderboard container"},s.a.createElement("h2",{className:"is-size-2 has-text-weight-bold has-text-centered"},"Leaderboard"),t.map((function(e,t){return s.a.createElement("div",{key:e.id,className:"column is-half is-offset-one-quarter"},s.a.createElement("div",{className:"box ".concat(0===t&&"hero is-primary")},s.a.createElement("div",{className:"author"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{className:"is-rounded",src:e.avatarURL,alt:e.name})),s.a.createElement("span",{className:"is-size-3"},e.name),0===t&&s.a.createElement("span",null,s.a.createElement("i",{className:"fas fa-trophy"})),e.id===a&&s.a.createElement("span",{className:"tag is-info"},"That's you!")),s.a.createElement("div",{className:"box-content"},s.a.createElement("span",{className:"has-text-centered is-size-5 has-text-weight-bold"},e.counts.points," points"),s.a.createElement("ul",{className:"options"},s.a.createElement("li",null,"Answered questions: ",s.a.createElement("span",null,e.counts.answers)),s.a.createElement("li",null,"Created questions: ",s.a.createElement("span",null,e.counts.questions))))))})))}));var k=Object(l.connect)((function(e){var t=e.questions;return{loading:0===Object.keys(t).length}}),{handleGetQuestions:function(){return function(e){return e(Object(u.showLoading)()),new Promise((function(e,t){setTimeout((function(){return e(Object(b.a)({},E))}),1e3)})).then((function(t){return e(function(e){return{type:"GET_QUESTIONS",questions:e}}(t))})).then((function(){return e(Object(u.hideLoading)())}))}}})((function(e){var t=e.loading,a=e.handleGetQuestions;return Object(n.useEffect)((function(){a()}),[a]),s.a.createElement("div",null,s.a.createElement(u.LoadingBar,null),!t&&s.a.createElement("div",{className:"app-container"},s.a.createElement(N,null),s.a.createElement(i.c,null,s.a.createElement(i.a,{path:"/",exact:!0,component:g}),s.a.createElement(i.a,{path:"/add",component:T}),s.a.createElement(i.a,{path:"/questions/:id",component:y}),s.a.createElement(i.a,{path:"/leaderboard",component:U}),s.a.createElement(i.a,{component:w}))))}));var S=Object(l.connect)((function(e){return{authedUser:e.authedUser}}))((function(e){var t=e.authedUser;return s.a.createElement(c.a,{basename:"/"},s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,null),s.a.createElement("div",{className:"app-container"},t?s.a.createElement(i.a,{path:"/",component:k}):s.a.createElement(i.a,{path:"/",component:O}))))})),z=a(9);var A=Object(z.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHED_USER":return t.id;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS":return Object(b.a)({},e,{},t.users);case"ADD_ANSWER":var a=t.authedUser,n=t.qid,s=t.answer;return Object(b.a)({},e,Object(p.a)({},a,Object(b.a)({},e[a],{answers:Object(b.a)({},e[a].answers,Object(p.a)({},n,s))})));case"ADD_QUESTION":var r=t.question;return Object(b.a)({},e,Object(p.a)({},r.author,Object(b.a)({},e[r.author],{questions:e[r.author].questions.concat([r.id])})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_QUESTIONS":var a=t.questions;return Object(b.a)({},e,{},a);case"ADD_ANSWER":var n=t.authedUser,s=t.qid,r=t.answer;return Object(b.a)({},e,Object(p.a)({},s,Object(b.a)({},e[s],Object(p.a)({},r,Object(b.a)({},e[s][r],{votes:e[s][r].votes.concat([n])})))));case"ADD_QUESTION":var o=t.question;return Object(b.a)({},e,Object(p.a)({},o.id,o));default:return e}},loadingBar:u.loadingBarReducer}),L=a(25),R=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n}}},D=Object(z.a)(L.a,R),_=(a(39),a(40),a(41),Object(z.d)(A,D));o.a.render(s.a.createElement(l.Provider,{store:_},s.a.createElement(S,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.57a76b60.chunk.js.map